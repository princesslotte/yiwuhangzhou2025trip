<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>義烏杭州之旅 / 이우항주여행</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Google Fonts (Fallback for specific fonts) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* 自定義字體與背景設置 */
        body {
            font-family: 'Microsoft JhengHei', 'Noto Sans TC', sans-serif;
            color: rgb(89, 74, 64); /* #594a40 */
            background-color: rgb(248, 232, 193); /* #f8e8c1 */
            background-image: radial-gradient(rgb(222, 170, 110) 20%, transparent 20%); /* #deaa6e */
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
            background-attachment: fixed; /* 背景不滾動 */
            -webkit-tap-highlight-color: transparent;
        }

        .lang-kr {
            font-family: 'SeoulNamsan', 'SeoulHangang', 'Noto Sans KR', sans-serif;
        }

        /* 隱藏滾動條但保留功能 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 擬真機票樣式 */
        .ticket-edge {
            background-image: radial-gradient(circle at 10px 50%, transparent 6px, #fff 7px);
            background-size: 100% 100%;
            background-position: -10px 0;
        }
        
        .ticket-dash {
            border-top: 2px dashed #cbd5e1;
        }

        /* 鋸齒邊緣效果 */
        .sawtooth {
            background: #fff;
            position: relative;
        }
        .sawtooth::after {
            content: "";
            position: absolute;
            right: -6px;
            top: 0;
            width: 12px;
            height: 100%;
            background: radial-gradient(circle, transparent 30%, #fff 30%);
            background-size: 10px 10px;
            background-position: -5px 0;
        }

        /* 模態框過渡 */
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
        .slide-up-enter-active, .slide-up-leave-active {
            transition: transform 0.3s ease;
        }
        .slide-up-enter-from, .slide-up-leave-to {
            transform: translateY(100%);
        }
    </style>
</head>
<body class="antialiased min-h-screen">

<div id="app" :class="{'lang-kr': currentLang === 'kr'}" class="w-full max-w-md mx-auto min-h-screen relative flex flex-col bg-opacity-90 shadow-2xl">
    
    <!-- 頂部標題與天氣 -->
    <header class="sticky top-0 z-30 bg-[#f8e8c1]/95 backdrop-blur-sm px-4 py-4 shadow-sm border-b border-[#deaa6e]">
        <div class="flex justify-between items-center mb-2">
            <h1 class="text-xl font-bold">{{ text.heading[currentLang] }}</h1>
            <button @click="toggleLang" class="px-3 py-1 bg-[#594a40] text-[#f8e8c1] rounded-full text-sm font-bold shadow-lg transform active:scale-95 transition">
                {{ currentLang === 'zh' ? '한국어' : '繁體中文' }}
            </button>
        </div>
        
        <!-- 實時天氣 (模擬) -->
        <div class="flex items-center gap-2 text-sm font-medium opacity-80">
            <i class="fas fa-map-marker-alt text-red-500"></i>
            <span>{{ weather[activeCity].name[currentLang] }}</span>
            <span class="mx-1">|</span>
            <i :class="weather[activeCity].icon" class="text-orange-500"></i>
            <span>{{ weather[activeCity].temp }}°C</span>
            <span>{{ weather[activeCity].desc[currentLang] }}</span>
        </div>
    </header>

    <!-- 主要內容滾動區 -->
    <main class="flex-1 overflow-y-auto pb-24 px-4 pt-4">
        
        <!-- 航班資訊 (只顯示在 Day 1 和 Day 6) -->
        <div v-if="currentDayIndex === 0" class="mb-6 animate-fade-in">
            <h2 class="text-lg font-bold mb-3 border-l-4 border-[#594a40] pl-2">{{ text.flightOutbound[currentLang] }}</h2>
            <div v-for="(flight, idx) in flights.outbound[currentLang]" :key="idx" class="bg-white rounded-lg shadow-md mb-3 overflow-hidden relative">
                <!-- 裝飾用鋸齒圓圈 -->
                <div class="absolute top-1/2 -left-3 w-6 h-6 bg-[#f8e8c1] rounded-full"></div>
                <div class="absolute top-1/2 -right-3 w-6 h-6 bg-[#f8e8c1] rounded-full"></div>
                
                <div class="p-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-lg text-[#594a40]">{{ flight.code }}</span>
                        <div class="flex-1 mx-4 border-b-2 border-dashed border-gray-300 relative top-1"></div>
                        <span class="text-xs font-mono bg-gray-100 px-2 py-1 rounded">{{ flight.airline }}</span>
                    </div>
                    <div class="flex justify-between items-end">
                        <div class="text-center">
                            <div class="text-2xl font-bold leading-none">{{ flight.depTime }}</div>
                            <div class="text-xs text-gray-500 mt-1 font-bold">{{ flight.depAirport }} <span v-if="flight.depTerminal" class="bg-[#594a40] text-white px-1 rounded text-[10px]">{{ flight.depTerminal }}</span></div>
                        </div>
                        <i class="fas fa-plane text-gray-300 mb-2 transform rotate-90"></i>
                        <div class="text-center">
                            <div class="text-2xl font-bold leading-none">{{ flight.arrTime }}</div>
                            <div class="text-xs text-gray-500 mt-1 font-bold">{{ flight.arrAirport }} <span v-if="flight.arrTerminal" class="bg-[#594a40] text-white px-1 rounded text-[10px]">{{ flight.arrTerminal }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="currentDayIndex === 5" class="mb-6 animate-fade-in">
            <h2 class="text-lg font-bold mb-3 border-l-4 border-[#594a40] pl-2">{{ text.flightInbound[currentLang] }}</h2>
            <div v-for="(flight, idx) in flights.inbound[currentLang]" :key="idx" class="bg-white rounded-lg shadow-md mb-3 overflow-hidden relative">
                 <div class="absolute top-1/2 -left-3 w-6 h-6 bg-[#f8e8c1] rounded-full"></div>
                <div class="absolute top-1/2 -right-3 w-6 h-6 bg-[#f8e8c1] rounded-full"></div>
                <div class="p-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-lg text-[#594a40]">{{ flight.code }}</span>
                        <div class="flex-1 mx-4 border-b-2 border-dashed border-gray-300 relative top-1"></div>
                    </div>
                    <div class="flex justify-between items-end">
                        <div class="text-center">
                            <div class="text-2xl font-bold leading-none">{{ flight.depTime }}</div>
                            <div class="text-xs text-gray-500 mt-1 font-bold">{{ flight.depAirport }} <span v-if="flight.depTerminal" class="bg-[#594a40] text-white px-1 rounded text-[10px]">{{ flight.depTerminal }}</span></div>
                        </div>
                        <i class="fas fa-plane text-gray-300 mb-2 transform rotate-90"></i>
                        <div class="text-center">
                            <div class="text-2xl font-bold leading-none">{{ flight.arrTime }}</div>
                            <div class="text-xs text-gray-500 mt-1 font-bold">{{ flight.arrAirport }} <span v-if="flight.arrTerminal" class="bg-[#594a40] text-white px-1 rounded text-[10px]">{{ flight.arrTerminal }}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 日期導航 -->
        <div class="flex overflow-x-auto no-scrollbar gap-2 mb-4 sticky top-0 pt-2 pb-2 z-20">
            <button v-for="(date, index) in dates" :key="index"
                @click="currentDayIndex = index"
                :class="currentDayIndex === index ? 'bg-[#594a40] text-[#f8e8c1] scale-105' : 'bg-white/60 text-[#594a40]'"
                class="flex-shrink-0 px-4 py-2 rounded-xl shadow-sm border border-[#594a40]/20 transition-all duration-200 flex flex-col items-center min-w-[70px]">
                <span class="text-xs font-bold opacity-70">Day {{ index + 1 }}</span>
                <span class="text-sm font-bold">{{ date }}</span>
            </button>
        </div>

        <!-- 行程列表 -->
        <div class="space-y-4">
            <div v-for="(item, idx) in currentItinerary" :key="idx" class="group bg-white rounded-xl p-4 shadow-sm border-l-4 border-[#deaa6e] relative transition-transform active:scale-[0.99]">
                <!-- 編輯/刪除按鈕 (僅顯示圖示) -->
                <div class="absolute top-2 right-2 flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity">
                    <button @click.stop="editItem(idx)" class="text-blue-400 hover:text-blue-600"><i class="fas fa-pen"></i></button>
                    <button @click.stop="deleteItem(idx)" class="text-red-400 hover:text-red-600"><i class="fas fa-trash"></i></button>
                </div>

                <div class="flex items-start gap-3" @click="editItem(idx)">
                    <div class="flex flex-col items-center min-w-[60px]">
                        <span class="text-lg font-bold text-[#594a40]">{{ item.time }}</span>
                        <!-- 裝飾線 -->
                        <div v-if="idx !== currentItinerary.length -1" class="h-full w-px bg-[#deaa6e] mt-2 border-dashed border-l border-[#deaa6e]"></div>
                    </div>
                    <div class="flex-1 pb-2">
                        <h3 class="font-bold text-lg leading-tight mb-1">{{ item.title }}</h3>
                        <p v-if="item.remarks" class="text-sm text-gray-600 bg-gray-50 p-2 rounded mt-1">
                            <i class="fas fa-info-circle text-[#deaa6e] mr-1"></i> {{ item.remarks }}
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- 新增行程按鈕 -->
            <button @click="addNewItem" class="w-full py-3 border-2 border-dashed border-[#594a40]/30 rounded-xl text-[#594a40]/60 hover:bg-[#594a40]/5 transition font-bold">
                <i class="fas fa-plus mr-2"></i> {{ currentLang === 'zh' ? '新增行程' : '일정 추가' }}
            </button>
        </div>
    </main>

    <!-- 底部導航菜單 -->
    <nav class="fixed bottom-0 w-full max-w-md bg-white border-t border-[#deaa6e] pb-safe z-40 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
        <div class="flex justify-around items-center h-16">
            <button v-for="tab in tabs" :key="tab.id" @click="activeTab = tab.id" 
                class="flex flex-col items-center justify-center w-full h-full text-[#594a40]"
                :class="{'text-[#deaa6e] font-bold': activeTab === tab.id}">
                <i :class="tab.icon" class="text-xl mb-1"></i>
                <span class="text-[10px]">{{ tab.label[currentLang] }}</span>
            </button>
        </div>
    </nav>

    <!-- 彈出頁面 (模態框) -->
    
    <!-- 1. 酒店模態框 -->
    <transition name="slide-up">
        <div v-if="activeTab === 'hotel'" class="fixed inset-0 z-50 flex flex-col justify-end bg-black/50">
            <div class="bg-[#f8e8c1] rounded-t-2xl h-[85vh] overflow-y-auto p-4 w-full max-w-md mx-auto shadow-2xl relative">
                <button @click="activeTab = null" class="absolute top-4 right-4 w-8 h-8 bg-[#594a40] text-[#f8e8c1] rounded-full flex items-center justify-center"><i class="fas fa-times"></i></button>
                <h2 class="text-2xl font-bold mb-6 text-center mt-2">{{ text.menu.hotel[currentLang] }}</h2>
                
                <div v-for="hotel in hotels" :key="hotel.id" class="bg-white rounded-xl p-5 shadow-lg mb-4">
                    <div class="flex justify-between items-start">
                        <h3 class="font-bold text-lg mb-2">{{ hotel[currentLang].name }}</h3>
                        <span class="text-xs bg-[#deaa6e] text-white px-2 py-1 rounded">{{ hotel.city[currentLang] }}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3"><i class="fas fa-map-pin mr-1 text-red-500"></i> {{ hotel[currentLang].address }}</p>
                    <a :href="hotel.url" target="_blank" class="block w-full py-2 bg-[#594a40] text-[#f8e8c1] text-center rounded-lg font-bold hover:opacity-90 transition">
                        <i class="fas fa-location-arrow mr-2"></i> AMAP
                    </a>
                </div>
            </div>
        </div>
    </transition>

    <!-- 2. 行前準備 -->
    <transition name="slide-up">
        <div v-if="activeTab === 'prep'" class="fixed inset-0 z-50 flex flex-col justify-end bg-black/50">
            <div class="bg-[#f8e8c1] rounded-t-2xl h-[85vh] overflow-y-auto p-4 w-full max-w-md mx-auto shadow-2xl relative">
                <button @click="activeTab = null" class="absolute top-4 right-4 w-8 h-8 bg-[#594a40] text-[#f8e8c1] rounded-full flex items-center justify-center"><i class="fas fa-times"></i></button>
                <h2 class="text-2xl font-bold mb-6 text-center mt-2">{{ text.menu.prep[currentLang] }}</h2>
                
                <div class="space-y-3">
                    <div v-for="(item, idx) in prepList[currentLang]" :key="idx" 
                         @click="item.checked = !item.checked"
                         class="bg-white p-4 rounded-xl shadow flex items-center gap-4 cursor-pointer select-none transition">
                        <div class="w-6 h-6 rounded border-2 border-[#594a40] flex items-center justify-center">
                            <i v-if="item.checked" class="fas fa-check text-[#594a40]"></i>
                        </div>
                        <span class="text-lg font-medium" :class="{'line-through text-gray-400': item.checked}">{{ item.text }}</span>
                    </div>
                </div>

                <!-- 圖片區域 (轉插) -->
                <div class="mt-6 bg-white p-4 rounded-xl shadow">
                    <h3 class="font-bold mb-3">{{ currentLang === 'zh' ? '轉插/電壓參考' : '어댑터/전압 참고' }}</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <img src="https://dimg04.c-ctrip.com/images/0M75312000gmvwxar988F.jpg_.webp" class="w-full rounded h-24 object-cover" alt="Adapter">
                        <img src="https://dimg04.c-ctrip.com/images/0M73l12000gmvmheu5762.jpg_.webp" class="w-full rounded h-24 object-cover" alt="Socket">
                    </div>
                </div>
            </div>
        </div>
    </transition>

    <!-- 3. 資訊 -->
    <transition name="slide-up">
        <div v-if="activeTab === 'info'" class="fixed inset-0 z-50 flex flex-col justify-end bg-black/50">
            <div class="bg-[#f8e8c1] rounded-t-2xl h-[60vh] overflow-y-auto p-4 w-full max-w-md mx-auto shadow-2xl relative">
                <button @click="activeTab = null" class="absolute top-4 right-4 w-8 h-8 bg-[#594a40] text-[#f8e8c1] rounded-full flex items-center justify-center"><i class="fas fa-times"></i></button>
                <h2 class="text-2xl font-bold mb-6 text-center mt-2">{{ text.menu.info[currentLang] }}</h2>
                
                <div class="grid gap-4">
                    <a href="https://ditu.yiwugo.com/" target="_blank" class="block bg-white p-6 rounded-xl shadow hover:bg-gray-50 transition text-center group">
                        <i class="fas fa-shopping-bag text-4xl text-[#deaa6e] mb-3 group-hover:scale-110 transition"></i>
                        <h3 class="font-bold text-lg mb-1">{{ currentLang === 'zh' ? '義烏國際商貿地圖' : '이우국제시장 지도' }}</h3>
                        <p class="text-xs text-gray-400">ditu.yiwugo.com</p>
                    </a>
                    <a href="https://www.hengdianworld.com/Uploads/202510051011u513z6.jpg" target="_blank" class="block bg-white p-6 rounded-xl shadow hover:bg-gray-50 transition text-center group">
                        <i class="fas fa-film text-4xl text-[#deaa6e] mb-3 group-hover:scale-110 transition"></i>
                        <h3 class="font-bold text-lg mb-1">{{ currentLang === 'zh' ? '橫店影視城地圖' : '헝디엔 영화촬영소 지도' }}</h3>
                        <p class="text-xs text-gray-400">hengdianworld.com</p>
                    </a>
                </div>
            </div>
        </div>
    </transition>

    <!-- 4. 匯率計算機 -->
    <transition name="slide-up">
        <div v-if="activeTab === 'currency'" class="fixed inset-0 z-50 flex flex-col justify-end bg-black/50">
            <div class="bg-[#f8e8c1] rounded-t-2xl h-[50vh] p-4 w-full max-w-md mx-auto shadow-2xl relative">
                <button @click="activeTab = null" class="absolute top-4 right-4 w-8 h-8 bg-[#594a40] text-[#f8e8c1] rounded-full flex items-center justify-center"><i class="fas fa-times"></i></button>
                <h2 class="text-2xl font-bold mb-6 text-center mt-2">{{ text.menu.currency[currentLang] }}</h2>
                
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <div class="mb-4">
                        <label class="block text-sm font-bold mb-1">CNY (人民幣)</label>
                        <input type="number" v-model="cnyAmount" @input="calcToKrw" class="w-full text-2xl p-2 border-b-2 border-[#deaa6e] outline-none font-mono" placeholder="0">
                    </div>
                    <div class="flex justify-center my-2">
                        <i class="fas fa-exchange-alt text-[#594a40] rotate-90"></i>
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-1">KRW (韓元)</label>
                        <input type="number" v-model="krwAmount" @input="calcToCny" class="w-full text-2xl p-2 border-b-2 border-[#deaa6e] outline-none font-mono" placeholder="0">
                    </div>
                    <p class="text-center text-xs text-gray-500">
                        * {{ currentLang === 'zh' ? '匯率參考 XE.com' : '환율 참고 XE.com' }} (1 CNY ≈ {{ rate }} KRW)
                    </p>
                </div>
            </div>
        </div>
    </transition>

    <!-- 編輯行程彈出框 -->
    <div v-if="editModal.show" class="fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4">
        <div class="bg-white w-full max-w-sm rounded-xl p-6 shadow-2xl">
            <h3 class="text-xl font-bold mb-4">{{ editModal.isNew ? (currentLang==='zh'?'新增行程':'일정 추가') : (currentLang==='zh'?'編輯行程':'일정 편집') }}</h3>
            
            <div class="space-y-3">
                <div>
                    <label class="text-xs font-bold text-gray-500 block mb-1">Time</label>
                    <input v-model="editModal.data.time" class="w-full border rounded p-2" placeholder="e.g. 10:00-11:30">
                </div>
                <div>
                    <label class="text-xs font-bold text-gray-500 block mb-1">Content</label>
                    <input v-model="editModal.data.title" class="w-full border rounded p-2" placeholder="Event name">
                </div>
                <div>
                    <label class="text-xs font-bold text-gray-500 block mb-1">Remarks</label>
                    <textarea v-model="editModal.data.remarks" class="w-full border rounded p-2 h-20" placeholder="Address, notes..."></textarea>
                </div>
            </div>

            <div class="flex gap-2 mt-6">
                <button @click="editModal.show = false" class="flex-1 py-2 border rounded hover:bg-gray-100">Cancel</button>
                <button @click="saveEdit" class="flex-1 py-2 bg-[#594a40] text-white rounded font-bold hover:opacity-90">Save</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp, ref, computed, reactive, watch } = Vue;

    createApp({
        setup() {
            const currentLang = ref('zh'); // 'zh' or 'kr'
            const currentDayIndex = ref(0);
            const activeTab = ref(null);
            const cnyAmount = ref('');
            const krwAmount = ref('');
            const rate = 193.5; // Approx rate

            const toggleLang = () => {
                currentLang.value = currentLang.value === 'zh' ? 'kr' : 'zh';
            };

            const dates = ['12/30', '12/31', '01/01', '01/02', '01/03', '01/04'];
            
            // 模擬天氣數據
            const activeCity = computed(() => {
                return currentDayIndex.value <= 3 ? 'yiw' : 'hgh'; // Day 1-4 Yiwu (index 0-3), Day 5-6 Hangzhou (actually index 3 is move day, logic simplify: 30,31,1 are Yiwu, 2 is move, 3,4 are Hangzhou)
                // Date mapping:
                // 0: 12/30 (Yiwu)
                // 1: 12/31 (Yiwu)
                // 2: 01/01 (Yiwu)
                // 3: 01/02 (Move -> HGH)
                // 4: 01/03 (HGH)
                // 5: 01/04 (HGH)
            });

            const weather = {
                yiw: { 
                    name: { zh: '義烏', kr: '이우' },
                    temp: 8, 
                    desc: { zh: '多雲', kr: '흐림' },
                    icon: 'fas fa-cloud'
                },
                hgh: { 
                    name: { zh: '杭州', kr: '항저우' },
                    temp: 6, 
                    desc: { zh: '晴朗', kr: '맑음' },
                    icon: 'fas fa-sun'
                }
            };

            // 文本數據
            const text = {
                heading: { zh: '義烏杭州之旅', kr: '이우항주여행' },
                flightOutbound: { zh: '12月30日 去程航班', kr: '12월 30일 출발 항공편' },
                flightInbound: { zh: '1月4日 回程航班', kr: '1월 4일 귀국 항공편' },
                menu: {
                    hotel: { zh: '酒店', kr: '호텔' },
                    prep: { zh: '行前準備', kr: '준비사항' },
                    info: { zh: '資訊', kr: '자료' },
                    currency: { zh: '匯率', kr: '환율' }
                }
            };

            const tabs = [
                { id: 'hotel', label: text.menu.hotel, icon: 'fas fa-bed' },
                { id: 'prep', label: text.menu.prep, icon: 'fas fa-suitcase-rolling' },
                { id: 'info', label: text.menu.info, icon: 'fas fa-map' },
                { id: 'currency', label: text.menu.currency, icon: 'fas fa-calculator' },
            ];

            const flights = {
                outbound: {
                    zh: [
                        { code: 'CX960', airline: 'Cathay', depTime: '12:05', arrTime: '14:30', depAirport: 'HKG', depTerminal: 'T1', arrAirport: 'HGH', arrTerminal: '' },
                        { code: 'CZ3869', airline: 'China Southern', depTime: '12:10', arrTime: '14:10', depAirport: 'CAN', depTerminal: '', arrAirport: 'HGH', arrTerminal: '' }
                    ],
                    kr: [
                        { code: 'OZ359', airline: 'Asiana', depTime: '12:05', arrTime: '13:45', depAirport: 'ICN', depTerminal: 'T1', arrAirport: 'HGH', arrTerminal: '' }
                    ]
                },
                inbound: {
                    zh: [
                        { code: 'CX961', airline: 'Cathay', depTime: '15:45', arrTime: '18:30', depAirport: 'HGH', depTerminal: 'T4', arrAirport: 'HKG', arrTerminal: '' },
                        { code: 'GJ8995', airline: 'Loong Air', depTime: '19:05', arrTime: '21:15', depAirport: 'HGH', depTerminal: '', arrAirport: 'CAN', arrTerminal: '' }
                    ],
                    kr: [
                        { code: 'OZ359', airline: 'Asiana', depTime: '15:05', arrTime: '18:10', depAirport: 'HGH', depTerminal: '', arrAirport: 'ICN', arrTerminal: 'T1' } // Prompt says OZ359 again for return, usually OZ360, but using provided data.
                    ]
                }
            };

            const hotels = [
                {
                    id: 1,
                    city: { zh: '義烏', kr: '이우' },
                    zh: { name: '義烏雅悅酒店', address: '滙港路599-1號, 義烏' },
                    kr: { name: 'Yiwu Yandoo Yayue Hotel', address: 'No.599-1 Huigang Road, 322000 Yiwu, China' },
                    url: 'https://surl.amap.com/6XmTj5T12fs0'
                },
                {
                    id: 2,
                    city: { zh: '杭州', kr: '항저우' },
                    zh: { name: '杭州西湖武林Pagoda君亭設計酒店', address: '體育場路261號, 杭州' },
                    kr: { name: 'The Pagoda Hotel Hangzhou West Lake Wulin', address: 'No. 261 Tiyuchang Road, Hangzhou' },
                    url: 'https://surl.amap.com/n94yQv1sdob'
                }
            ];

            const prepList = reactive({
                zh: [
                    { text: '香港身分證/回鄉證/護照', checked: false },
                    { text: '轉插 (Adapter)', checked: false },
                    { text: '手機充電器', checked: false },
                    { text: '上網卡或漫遊', checked: false },
                    { text: '衛生用品', checked: false },
                    { text: '保暖衣物', checked: false },
                    { text: '救急藥物(傷風感冒,胃藥等)', checked: false }
                ],
                kr: [
                    { text: '여권', checked: false },
                    { text: '아뎁터', checked: false },
                    { text: '해외 결제 신용카드/알리페이', checked: false },
                    { text: '유심 / 포켓와이파이', checked: false },
                    { text: '충전기', checked: false },
                    { text: '개인 위생용품', checked: false },
                    { text: '비상약', checked: false },
                    { text: '따뜻한 옷', checked: false }
                ]
            });

            // 行程數據初始化 (Reactive)
            const itineraryData = reactive({
                zh: [
                    // Day 1
                    [
                        { time: '16:00', title: '義烏雅悅酒店 Check-in', remarks: '地址: 滙港路599-1號, 義烏' },
                        { time: '18:30-21:00', title: '晚餐 義烏宴．小宴', remarks: '' },
                        { time: '21:00-23:00', title: '賓王夜市 (三挺路夜市)', remarks: '提示: 晚間人非常的多，請注意不要走散，並且注意隨身貴重物品，以免丟失。' },
                        { time: '23:00', title: '回酒店', remarks: '' }
                    ],
                    // Day 2
                    [
                        { time: '7:00-9:00', title: '雅悅酒店早餐', remarks: '' },
                        { time: '9:50', title: '酒店大堂集合', remarks: '' },
                        { time: '10:00-11:30', title: '前往韓雄貿易有限公司', remarks: '' },
                        { time: '11:30-13:00', title: '午餐', remarks: '義烏國際商貿城二區 韓國料理' },
                        { time: '13:00-16:00', title: '參觀義烏國際商貿城(福田市場)', remarks: '請參考義烏國際商貿城地圖' },
                        { time: '16:00-16:15', title: '集合地點等候', remarks: '' },
                        { time: '17:00-21:00', title: '晚餐 佛堂．唐朝戲宴 (佛堂鎮)', remarks: '' },
                        { time: '21:00-22:20', title: '佛堂老街', remarks: '跨年夜 有煙花晚會 時間於10點開始' },
                        { time: '22:30', title: '回酒店', remarks: '' }
                    ],
                    // Day 3
                    [
                        { time: '7:00-9:00', title: '雅悅酒店早餐', remarks: '' },
                        { time: '9:20', title: '酒店大堂集合', remarks: '' },
                        { time: '9:30-12:30', title: '前往橫店影視城', remarks: '' },
                        { time: '12:30-13:30', title: '午餐 臨江閣．江景餐廳', remarks: '' },
                        { time: '13:45-16:00', title: '參觀東陽中國木雕城', remarks: '' },
                        { time: '16:00-19:00', title: '阿里亞娜中東餐廳', remarks: '' },
                        { time: '19:10-21:00', title: '華潤義烏天地商業街區間(自由活動)', remarks: '' },
                        { time: '21:00', title: '回酒店', remarks: '' }
                    ],
                    // Day 4
                    [
                        { time: '7:00-9:00', title: '雅悅酒店早餐', remarks: '' },
                        { time: '11:30', title: '酒店大堂集合/退房', remarks: '退房時間為11點' },
                        { time: '12:00-14:30', title: '前往杭州', remarks: '車程約2小時, 於中途站休息 / 午餐' },
                        { time: '15:00', title: '杭州西湖武林Pagoda君亭設計酒店 Check-in', remarks: '地址：中國,杭州,體育場路261號' },
                        { time: '15:00-17:00', title: '自由活動', remarks: '' },
                        { time: '17:30', title: '酒店大堂集合', remarks: '' },
                        { time: '18:00-20:30', title: '晚餐 入江南．金獎杭幫菜．浙江菜', remarks: '地址: 浙江省杭州市西湖区虎跑路四眼井228号' },
                        { time: '21:00', title: '武林夜市', remarks: '自由活動' }
                    ],
                    // Day 5
                    [
                        { time: '6:30-10:00', title: '酒店早餐', remarks: '' },
                        { time: '10:00-11:00', title: '大韓民國臨時政府杭州舊址紀念館', remarks: '地址: 中國浙江省杭州市上城区湖滨长生路55号' },
                        { time: '11:00-12:30', title: '遊覽西湖 (自由活動)', remarks: '曲院風荷 (西湖十景之一), 岳王廟' },
                        { time: '12:40-14:00', title: '午餐 寄暢興·江南蟹黃麵·非遺杭幫菜(西湖湖景店)', remarks: '地址：南山路147号西湖天地' },
                        { time: '14:10-16:30', title: '遊覽西湖 (自由活動)', remarks: '柳浪聞鶯 (西湖十景之一), 錢王祠, 湖濱路步行街' },
                        { time: '18:30-20:30', title: '晚餐 茶人村·西湖醋魚', remarks: '地址: 浙江省杭州市西湖区龍井路99號' },
                        { time: '20:30', title: '清河坊歷史文化特色街區 (自由活動)', remarks: '' },
                        { time: '21:00', title: '回酒店', remarks: '' }
                    ],
                    // Day 6
                    [
                        { time: '6:30-10:00', title: '酒店早餐', remarks: '' },
                        { time: '11:00', title: '酒店大堂集合/退房', remarks: '退房時間為11點' },
                        { time: '11:30', title: '前往蕭山國際機場', remarks: '第四航廈' }
                    ]
                ],
                kr: [
                    // Day 1
                    [
                        { time: '16:00', title: '야웨호텔 (Yiwu Yandoo Yayue Hotel) 체크인', remarks: '주소: No.599-1 Huigang Road, Yiwu' },
                        { time: '18:30-21:00', title: '저녁 이우연회식당 (YIWUYAN.Xiaoyan)', remarks: '' },
                        { time: '21:00-23:00', title: '빈왕 야시장 (Binwang Night Market)', remarks: '주의사항: 저녁에는 사람이 아주 많습니다. 길을 잃지 않도록 주의하시고, 소지품 분실을 피하기 위해 귀중품을 잘 챙겨주시기 바랍니다.' },
                        { time: '23:00', title: '야웨호텔', remarks: '' }
                    ],
                    // Day 2
                    [
                        { time: '7:00-9:00', title: '호텔 조식', remarks: '' },
                        { time: '9:50', title: '호텔로비서 집합', remarks: '' },
                        { time: '10:00-11:30', title: '한웅 무역 회사', remarks: '' },
                        { time: '11:30-13:00', title: '점심', remarks: '이우국제시장 2동 한국요리' },
                        { time: '13:00-16:00', title: '이우국제시장 (푸톈 시장）구경', remarks: '이우국제시장지도 참고' },
                        { time: '16:00-16:15', title: '만나는 곳에서 집합', remarks: '' },
                        { time: '17:00-21:00', title: '저녁 포당.당차오 시엔 (중식)', remarks: '' },
                        { time: '21:00-22:20', title: '포당옛날거리 (Fotang Old street)', remarks: '신년전야 밤에 불꽃놀이 행사 (10시부터 시작)' },
                        { time: '22:30', title: '야웨호텔', remarks: '' }
                    ],
                    // Day 3
                    [
                        { time: '7:00-9:00', title: '호텔 조식', remarks: '' },
                        { time: '9:20', title: '호텔로비서 집합', remarks: '' },
                        { time: '9:30-12:30', title: '흠덴 영화촬영소(Hengdian World Studios) 로 출발', remarks: '' },
                        { time: '12:30-13:30', title: '점심 린장제．강변식당 (Linjiangge)', remarks: '' },
                        { time: '13:45-16:00', title: '동양 나무조각박물관', remarks: '' },
                        { time: '16:00-19:00', title: '아리아나중동식당 (ARIANA Restaurant)', remarks: '' },
                        { time: '19:10-21:00', title: '이우티엔디 (Yiwu Place) (자유시간)', remarks: '' },
                        { time: '21:00', title: '야웨호텔', remarks: '' }
                    ],
                    // Day 4
                    [
                        { time: '7:00-9:00', title: '호텔 조식', remarks: '' },
                        { time: '11:30', title: '호텔로비서 집합/체크아웃', remarks: '체크아웃 시간: 11시' },
                        { time: '12:00-14:30', title: '항주로 출발', remarks: '약 2시간 걸림, 휴게소에서 점심' },
                        { time: '15:00', title: '서호 우린 파고다 호텔 체크인', remarks: '주소：中國,杭州,體育場路261號' },
                        { time: '15:00-17:00', title: '자유시간', remarks: '' },
                        { time: '17:30', title: '호텔로비서 집합', remarks: '' },
                        { time: '18:00-20:30', title: '저녁 루장난 절강성요리', remarks: '주소: 浙江省杭州市西湖区虎跑路四眼井228号' },
                        { time: '21:00', title: '우린야시장 (Wulin Night Market)', remarks: '자유시간' }
                    ],
                    // Day 5
                    [
                        { time: '6:30-10:00', title: '호텔 조식', remarks: '' },
                        { time: '10:00-11:00', title: '대한민국 임시정부 항저우 구지 기념관', remarks: '주소: 中國浙江省杭州市上城区湖滨长生路55号' },
                        { time: '11:00-12:30', title: '서호 구경 (자유시간)', remarks: '서호십경 : 곡원풍하, 악비묘' },
                        { time: '12:40-14:00', title: '점심 지챵싱 계살국수 (Jì Chàng Xīng)', remarks: '주소：南山路147号西湖天地' },
                        { time: '14:10-16:30', title: '서호 구경 (자유시간)', remarks: '유랑문앵, 전왕사, 후빈로 번화가' },
                        { time: '18:30-20:30', title: '저녁 다인촌 (Charencun Tea House)', remarks: '주소 : 浙江省杭州市西湖区龍井路99號' },
                        { time: '20:30', title: '칭허팡역사문화거리 (자유시간)', remarks: '' },
                        { time: '21:00', title: '파고다호텔', remarks: '' }
                    ],
                    // Day 6
                    [
                        { time: '6:30-10:00', title: '호텔조식', remarks: '' },
                        { time: '11:00', title: '호텔로비서 집합/체크아웃', remarks: '체크아웃 시간: 11시' },
                        { time: '11:30', title: '항저우공항으로 출발', remarks: '제4여객터미널' }
                    ]
                ]
            });

            const currentItinerary = computed(() => {
                return itineraryData[currentLang.value][currentDayIndex.value];
            });

            // 編輯功能
            const editModal = reactive({
                show: false,
                isNew: false,
                editIndex: -1,
                data: { time: '', title: '', remarks: '' }
            });

            const editItem = (index) => {
                const item = currentItinerary.value[index];
                editModal.isNew = false;
                editModal.editIndex = index;
                editModal.data = { ...item };
                editModal.show = true;
            };

            const addNewItem = () => {
                editModal.isNew = true;
                editModal.data = { time: '', title: '', remarks: '' };
                editModal.show = true;
            };

            const deleteItem = (index) => {
                if(confirm(currentLang.value === 'zh' ? '確定刪除？' : '삭제 하시겠습니까?')) {
                    itineraryData[currentLang.value][currentDayIndex.value].splice(index, 1);
                }
            };

            const saveEdit = () => {
                const list = itineraryData[currentLang.value][currentDayIndex.value];
                if (editModal.isNew) {
                    list.push({ ...editModal.data });
                } else {
                    list[editModal.editIndex] = { ...editModal.data };
                }
                editModal.show = false;
            };

            // 匯率計算
            const calcToKrw = () => {
                if(cnyAmount.value) {
                    krwAmount.value = (cnyAmount.value * rate).toFixed(0);
                } else {
                    krwAmount.value = '';
                }
            };
            const calcToCny = () => {
                if(krwAmount.value) {
                    cnyAmount.value = (krwAmount.value / rate).toFixed(2);
                } else {
                    cnyAmount.value = '';
                }
            };

            return {
                currentLang,
                toggleLang,
                currentDayIndex,
                dates,
                weather,
                activeCity,
                text,
                tabs,
                activeTab,
                flights,
                currentItinerary,
                hotels,
                prepList,
                editModal,
                editItem,
                addNewItem,
                deleteItem,
                saveEdit,
                cnyAmount,
                krwAmount,
                calcToKrw,
                calcToCny,
                rate
            };
        }
    }).mount('#app');
</script>
</body>
</html>