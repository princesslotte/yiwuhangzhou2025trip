{
  "result": "<!DOCTYPE html>\n<html lang=\"zh-TW\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n    <title>義烏杭州之旅 / 이우항주여행</title>\n    \n    <!-- Tailwind CSS -->\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    \n    <!-- Vue.js 3 -->\n    <script src=\"https://unpkg.com/vue@3/dist/vue.global.js\"></script>\n    \n    <!-- Font Awesome -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n\n    <!-- Fonts -->\n    <link href=\"https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap\" rel=\"stylesheet\">\n\n    <style>\n        /* Custom Fonts Setup */\n        .font-zh { \n            font-family: 'Microsoft JhengHei', 'Noto Sans TC', sans-serif; \n        }\n        .font-kr { \n            /* SeoulNamsan is the standard Seoul Type, with Noto as fallback */\n            font-family: 'SeoulNamsan', 'SeoulHangang', 'Noto Sans KR', sans-serif; \n        }\n\n        :root {\n            --theme-text: #594a40;\n            --theme-bg: #f8e8c1;\n            --dot-color: #deaa6e;\n        }\n\n        body {\n            background-color: var(--theme-bg);\n            /* Polka dot: Size increased to 40px to lower density by ~30% compared to typical 20-30px */\n            background-image: radial-gradient(var(--dot-color) 15%, transparent 15%),\n                              radial-gradient(var(--dot-color) 15%, transparent 15%);\n            background-position: 0 0, 20px 20px;\n            background-size: 40px 40px; \n            background-attachment: fixed;\n            color: var(--theme-text);\n            -webkit-tap-highlight-color: transparent;\n        }\n\n        /* Glassmorphism */\n        .glass-panel {\n            background: rgba(255, 255, 255, 0.65);\n            backdrop-filter: blur(12px);\n            -webkit-backdrop-filter: blur(12px);\n            border: 1px solid rgba(255, 255, 255, 0.4);\n            box-shadow: 0 4px 15px rgba(89, 74, 64, 0.05);\n        }\n\n        /* Realistic Ticket Style */\n        .ticket-card {\n            background: white;\n            position: relative;\n            /* Notch effect on sides */\n            clip-path: polygon(\n                0% 0%, 100% 0%, \n                100% calc(50% - 10px), 94% 50%, 100% calc(50% + 10px), \n                100% 100%, 0% 100%, \n                0% calc(50% + 10px), 6% 50%, 0% calc(50% - 10px)\n            );\n            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));\n        }\n\n        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\n\n        /* Animations */\n        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }\n        .fade-enter-from, .fade-leave-to { opacity: 0; }\n        .slide-up-enter-active, .slide-up-leave-active { transition: transform 0.3s ease; }\n        .slide-up-enter-from, .slide-up-leave-to { transform: translateY(100%); }\n    </style>\n</head>\n<body class=\"min-h-screen pb-24\">\n\n<div id=\"app\" class=\"max-w-[480px] mx-auto min-h-screen relative\" :class=\"currentLang === 'zh' ? 'font-zh' : 'font-kr'\">\n    \n    <!-- Header Panel -->\n    <header class=\"sticky top-4 z-30 mx-4 mb-8 rounded-3xl glass-panel p-4\">\n        <div class=\"flex justify-between items-start\">\n            <div class=\"flex flex-col\">\n                <h1 class=\"text-xl font-bold tracking-tight\">{{ t('title') }}</h1>\n                <div class=\"flex items-center gap-3 mt-1 text-xs font-bold opacity-80\">\n                    <span class=\"flex items-center gap-1 bg-[#deaa6e]/20 px-2 py-1 rounded-lg\">\n                        <i class=\"fa-solid fa-location-dot text-[#deaa6e]\"></i> {{ currentLocationName }}\n                    </span>\n                    <span v-if=\"weather\" class=\"flex items-center gap-1 bg-[#deaa6e]/20 px-2 py-1 rounded-lg\">\n                        <i class=\"fa-solid fa-temperature-half text-[#deaa6e]\"></i> {{ weather.temperature }}°C\n                    </span>\n                    <span v-else class=\"text-[10px] opacity-60\">...</span>\n                </div>\n            </div>\n            \n            <button @click=\"toggleLang\" \n                class=\"bg-[#594a40] text-[#f8e8c1] px-4 py-1.5 rounded-full text-xs font-bold shadow-sm active:scale-95 transition-transform hover:bg-[#4a3b32]\">\n                {{ currentLang === 'zh' ? '한국어' : '繁體中文' }}\n            </button>\n        </div>\n    </header>\n\n    <!-- Date Navigation (Wide Spacing & Larger Font) -->\n    <div class=\"mx-4 mb-6\">\n        <div class=\"glass-panel rounded-2xl p-1 flex justify-between gap-1\">\n            <button v-for=\"(date, index) in scheduleDates\" :key=\"index\"\n                @click=\"selectedDate = date\"\n                class=\"flex-1 py-3 rounded-xl text-center transition-all duration-200\"\n                :class=\"selectedDate === date ? 'bg-[#594a40] text-[#f8e8c1] shadow-md' : 'hover:bg-[#deaa6e]/10 text-[#594a40]'\">\n                <div class=\"text-[10px] opacity-70 uppercase tracking-widest font-bold\">Day {{ index + 1 }}</div>\n                <!-- Enlarged Font (+20%) -->\n                <div class=\"text-lg font-bold mt-0.5\">{{ formatDate(date) }}</div>\n            </button>\n        </div>\n    </div>\n\n    <!-- Main Content -->\n    <main class=\"px-4 space-y-6\">\n\n        <!-- Flight Information -->\n        <div v-if=\"isFlightDate\" class=\"space-y-4\">\n            <div class=\"flex items-center gap-2 mb-1 px-1 opacity-70\">\n                <i class=\"fa-solid fa-plane-departure text-xs\"></i>\n                <span class=\"text-xs font-bold\">{{ t('flightInfo') }}</span>\n            </div>\n\n            <div v-for=\"(flight, idx) in currentFlights\" :key=\"idx\" class=\"drop-shadow-sm\">\n                <div class=\"ticket-card rounded-xl p-4 text-[#594a40]\">\n                    <!-- Ticket Header -->\n                    <div class=\"flex justify-between items-center mb-3 border-b border-dashed border-[#deaa6e]/50 pb-2\">\n                        <div class=\"flex items-center gap-2\">\n                            <div class=\"w-8 h-8 rounded-full bg-[#deaa6e]/20 flex items-center justify-center\">\n                                <i class=\"fa-solid fa-ticket text-[#deaa6e] text-sm\"></i>\n                            </div>\n                            <span class=\"font-bold text-xl tracking-wide\">{{ flight.code }}</span>\n                        </div>\n                        <div class=\"text-[10px] font-bold bg-[#f8e8c1] px-2 py-1 rounded text-[#594a40]\">\n                            {{ formatDateFull(selectedDate) }}\n                        </div>\n                    </div>\n                    \n                    <!-- Route & Time -->\n                    <div class=\"flex justify-between items-center text-center mt-2\">\n                        <!-- Departure -->\n                        <div class=\"text-left w-[35%]\">\n                            <div class=\"text-2xl font-bold leading-none\">{{ flight.depTime }}</div>\n                            <div class=\"text-xs font-bold mt-1 opacity-80\">{{ flight.depAirport }}</div>\n                            <span v-if=\"flight.depTerminal\" class=\"inline-block bg-[#594a40] text-[#f8e8c1] px-1.5 rounded text-[10px] mt-1\">{{ flight.depTerminal }}</span>\n                        </div>\n                        \n                        <!-- Plane Visual -->\n                        <div class=\"flex-1 px-1 flex flex-col items-center justify-center\">\n                            <div class=\"relative w-full flex items-center justify-center\">\n                                <div class=\"w-full h-[2px] bg-[#deaa6e]\"></div>\n                                <i class=\"fa-solid fa-plane text-[#594a40] text-xl absolute bg-white px-2 transform rotate-0\"></i>\n                            </div>\n                            <div class=\"text-[9px] text-[#deaa6e] mt-2 font-bold tracking-wider\">TO</div>\n                        </div>\n\n                        <!-- Arrival -->\n                        <div class=\"text-right w-[35%]\">\n                            <div class=\"text-2xl font-bold leading-none\">{{ flight.arrTime }}</div>\n                            <div class=\"text-xs font-bold mt-1 opacity-80\">{{ flight.arrAirport }}</div>\n                            <span v-if=\"flight.arrTerminal\" class=\"inline-block bg-[#594a40] text-[#f8e8c1] px-1.5 rounded text-[10px] mt-1\">{{ flight.arrTerminal }}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Itinerary List -->\n        <div class=\"glass-panel p-5 rounded-3xl min-h-[400px]\">\n            <div class=\"flex justify-between items-center mb-5\">\n                <h3 class=\"font-bold text-lg flex items-center gap-2\">\n                    <i class=\"fa-solid fa-list-check text-[#deaa6e]\"></i> {{ t('schedule') }}\n                </h3>\n                <button @click=\"addItem\" class=\"w-9 h-9 rounded-full bg-[#594a40] text-[#f8e8c1] flex items-center justify-center shadow hover:bg-opacity-90 active:scale-90 transition\">\n                    <i class=\"fa-solid fa-plus text-sm\"></i>\n                </button>\n            </div>\n\n            <div v-if=\"currentItinerary.length === 0\" class=\"text-center py-12 opacity-40 flex flex-col items-center\">\n                <i class=\"fa-regular fa-calendar-plus text-4xl mb-3\"></i>\n                <p class=\"text-sm font-bold\">{{ t('noSchedule') }}</p>\n            </div>\n\n            <!-- Timeline -->\n            <div class=\"relative pl-4 space-y-6 border-l-2 border-[#deaa6e]/30 ml-2\">\n                <div v-for=\"(item, index) in currentItinerary\" :key=\"item.id\" class=\"relative group\">\n                    <!-- Dot -->\n                    <div class=\"absolute -left-[23px] top-3 w-3.5 h-3.5 rounded-full bg-[#deaa6e] border-2 border-[#f8e8c1] shadow-sm\"></div>\n                    \n                    <!-- Card -->\n                    <div class=\"bg-white/90 p-3 rounded-xl shadow-sm hover:shadow-md transition-shadow\">\n                        <div v-if=\"!item.isEditing\" class=\"flex justify-between items-start gap-2\">\n                            <div class=\"flex-1\">\n                                <div class=\"font-bold text-[#deaa6e] text-sm mb-1 bg-[#594a40]/5 inline-block px-2 py-0.5 rounded\">\n                                    {{ item.time }}\n                                </div>\n                                <div class=\"font-bold text-base text-[#594a40] mb-1 leading-snug\">{{ item.content }}</div>\n                                <div v-if=\"item.remark\" class=\"text-xs text-gray-500 mt-1 bg-gray-50 p-1.5 rounded border-l-2 border-[#deaa6e]/50\">\n                                    {{ item.remark }}\n                                </div>\n                            </div>\n                            <div class=\"flex flex-col gap-3 ml-2 mt-1\">\n                                <button @click=\"editItem(index)\" class=\"text-[#594a40]/40 hover:text-[#594a40]\"><i class=\"fa-solid fa-pen text-xs\"></i></button>\n                                <button @click=\"deleteItem(index)\" class=\"text-red-400/60 hover:text-red-500\"><i class=\"fa-solid fa-trash text-xs\"></i></button>\n                            </div>\n                        </div>\n\n                        <!-- Edit Mode -->\n                        <div v-else class=\"space-y-3 p-1\">\n                            <input v-model=\"item.editTime\" placeholder=\"Time (e.g. 10:00-12:00)\" class=\"w-full p-2 rounded-lg bg-[#f8e8c1]/30 border border-[#deaa6e]/50 text-sm font-bold\">\n                            <input v-model=\"item.editContent\" placeholder=\"Activity\" class=\"w-full p-2 rounded-lg bg-[#f8e8c1]/30 border border-[#deaa6e]/50 text-sm\">\n                            <textarea v-model=\"item.editRemark\" placeholder=\"Remarks (optional)\" rows=\"2\" class=\"w-full p-2 rounded-lg bg-[#f8e8c1]/30 border border-[#deaa6e]/50 text-xs\"></textarea>\n                            <div class=\"flex gap-2 justify-end\">\n                                <button @click=\"saveItem(index)\" class=\"px-4 py-1.5 bg-[#594a40] text-[#f8e8c1] text-xs rounded-full font-bold\">Save</button>\n                                <button @click=\"cancelEdit(index)\" class=\"px-4 py-1.5 bg-gray-300 text-gray-600 text-xs rounded-full font-bold\">Cancel</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </main>\n\n    <!-- Bottom Navigation -->\n    <nav class=\"fixed bottom-0 left-0 right-0 bg-[#594a40] text-[#f8e8c1] pb-safe z-40 rounded-t-2xl shadow-[0_-5px_20px_rgba(0,0,0,0.2)]\">\n        <div class=\"max-w-[480px] mx-auto flex justify-around items-center h-16\">\n            <button @click=\"openModal('hotel')\" class=\"flex flex-col items-center justify-center w-1/4 h-full active:bg-white/10 transition rounded-tl-2xl\">\n                <i class=\"fa-solid fa-hotel text-lg mb-1\"></i>\n                <span class=\"text-[10px] font-bold\">{{ t('menu.hotel') }}</span>\n            </button>\n            <button @click=\"openModal('prep')\" class=\"flex flex-col items-center justify-center w-1/4 h-full active:bg-white/10 transition\">\n                <i class=\"fa-solid fa-suitcase-rolling text-lg mb-1\"></i>\n                <span class=\"text-[10px] font-bold\">{{ t('menu.prep') }}</span>\n            </button>\n            <button @click=\"openModal('info')\" class=\"flex flex-col items-center justify-center w-1/4 h-full active:bg-white/10 transition\">\n                <i class=\"fa-solid fa-map-location-dot text-lg mb-1\"></i>\n                <span class=\"text-[10px] font-bold\">{{ t('menu.info') }}</span>\n            </button>\n            <button @click=\"openModal('rate')\" class=\"flex flex-col items-center justify-center w-1/4 h-full active:bg-white/10 transition rounded-tr-2xl\">\n                <i class=\"fa-solid fa-calculator text-lg mb-1\"></i>\n                <span class=\"text-[10px] font-bold\">{{ t('menu.rate') }}</span>\n            </button>\n        </div>\n    </nav>\n\n    <!-- Modals -->\n    <transition name=\"fade\">\n        <div v-if=\"activeModal\" class=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none\">\n            <div class=\"absolute inset-0 bg-[#594a40]/70 backdrop-blur-sm pointer-events-auto\" @click=\"closeModal\"></div>\n            <transition name=\"slide-up\" appear>\n                <div class=\"bg-[#f8e8c1] w-full max-w-[480px] h-[85vh] sm:h-[75vh] sm:rounded-2xl rounded-t-3xl shadow-2xl overflow-hidden pointer-events-auto flex flex-col relative\">\n                    \n                    <!-- Modal Header -->\n                    <div class=\"p-4 border-b border-[#594a40]/10 flex justify-between items-center bg-[#f8e8c1] shrink-0\">\n                        <h2 class=\"text-lg font-bold flex items-center gap-2\">\n                            <i class=\"fa-solid fa-circle text-[#deaa6e] text-[8px]\"></i>\n                            {{ t('menu.' + activeModal) }}\n                        </h2>\n                        <button @click=\"closeModal\" class=\"w-8 h-8 rounded-full bg-[#594a40]/10 hover:bg-[#594a40]/20 flex items-center justify-center transition text-[#594a40]\">\n                            <i class=\"fa-solid fa-xmark\"></i>\n                        </button>\n                    </div>\n\n                    <!-- Modal Content -->\n                    <div class=\"flex-1 overflow-y-auto p-4 space-y-6 pb-12\">\n                        \n                        <!-- Hotel Modal -->\n                        <div v-if=\"activeModal === 'hotel'\" class=\"space-y-4\">\n                            <div v-for=\"h in hotels[currentLang]\" :key=\"h.name\" class=\"bg-white p-5 rounded-2xl shadow-sm border-l-4 border-[#deaa6e]\">\n                                <div class=\"text-xs font-bold text-[#deaa6e] mb-1 uppercase tracking-wide flex items-center gap-1\">\n                                    <i class=\"fa-solid fa-map-pin\"></i> {{ h.city }}\n                                </div>\n                                <h3 class=\"font-bold text-lg mb-2 leading-tight\">{{ h.name }}</h3>\n                                <p class=\"text-sm opacity-70 mb-4 bg-gray-50 p-2 rounded\">{{ h.address }}</p>\n                                <a :href=\"h.url\" target=\"_blank\" class=\"flex items-center justify-center gap-2 w-full py-3 bg-[#594a40] text-[#f8e8c1] rounded-xl text-sm font-bold shadow-sm active:scale-95 transition\">\n                                    <img src=\"https://a.amap.com/pc/static/favicon.ico\" class=\"w-4 h-4 rounded-full\"> \n                                    AMAP (高德地圖)\n                                </a>\n                            </div>\n                        </div>\n\n                        <!-- Preparation Modal -->\n                        <div v-if=\"activeModal === 'prep'\" class=\"space-y-4\">\n                            <div class=\"grid gap-3\">\n                                <div v-for=\"(item, idx) in todoList[currentLang]\" :key=\"idx\" \n                                     class=\"flex items-center gap-4 p-4 bg-white/90 rounded-2xl shadow-sm cursor-pointer hover:bg-white transition active:scale-[0.99]\"\n                                     @click=\"toggleTodo(item)\">\n                                    <div class=\"w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200 shrink-0\"\n                                         :class=\"item.checked ? 'bg-[#594a40] border-[#594a40]' : 'border-[#deaa6e] bg-white'\">\n                                        <i v-if=\"item.checked\" class=\"fa-solid fa-check text-[#f8e8c1] text-xs\"></i>\n                                    </div>\n                                    <span class=\"text-lg font-bold text-[#594a40]\" :class=\"{'line-through opacity-40': item.checked}\">\n                                        {{ item.text }}\n                                    </span>\n                                </div>\n                            </div>\n                            \n                            <!-- Images for Adapter -->\n                            <div class=\"mt-8 pt-6 border-t border-[#594a40]/10\">\n                                <h4 class=\"font-bold mb-3 flex items-center gap-2 text-[#594a40]\">\n                                    <i class=\"fa-solid fa-plug\"></i> {{ currentLang === 'zh' ? '轉插 / 適配器' : '아뎁터 (Adapter)' }}\n                                </h4>\n                                <div class=\"grid grid-cols-2 gap-3\">\n                                    <img src=\"https://dimg04.c-ctrip.com/images/0M75312000gmvwxar988F.jpg_.webp\" class=\"w-full h-32 object-cover rounded-xl shadow-sm border border-[#594a40]/10\">\n                                    <img src=\"https://dimg04.c-ctrip.com/images/0M73l12000gmvmheu5762.jpg_.webp\" class=\"w-full h-32 object-cover rounded-xl shadow-sm border border-[#594a40]/10\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Info Modal -->\n                        <div v-if=\"activeModal === 'info'\" class=\"space-y-4\">\n                            <a href=\"https://ditu.yiwugo.com/\" target=\"_blank\" class=\"bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between group active:scale-95 transition\">\n                                <div>\n                                    <div class=\"flex items-center gap-2 mb-1\">\n                                        <i class=\"fa-solid fa-cart-shopping text-[#deaa6e]\"></i>\n                                        <h3 class=\"font-bold text-lg\">{{ currentLang === 'zh' ? '義烏國際商貿地圖' : '이우 국제 상업 무역 지도' }}</h3>\n                                    </div>\n                                    <span class=\"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full\">yiwugo.com</span>\n                                </div>\n                                <i class=\"fa-solid fa-arrow-up-right-from-square text-[#594a40] text-xl\"></i>\n                            </a>\n                            <a href=\"https://www.hengdianworld.com/Uploads/202510051011u513z6.jpg\" target=\"_blank\" class=\"bg-white p-5 rounded-2xl shadow-sm flex items-center justify-between group active:scale-95 transition\">\n                                <div>\n                                    <div class=\"flex items-center gap-2 mb-1\">\n                                        <i class=\"fa-solid fa-film text-[#deaa6e]\"></i>\n                                        <h3 class=\"font-bold text-lg\">{{ currentLang === 'zh' ? '橫店影視城 明清宮苑' : '헝디엔 명청궁원 지도' }}</h3>\n                                    </div>\n                                    <span class=\"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full\">Image</span>\n                                </div>\n                                <i class=\"fa-solid fa-image text-[#594a40] text-xl\"></i>\n                            </a>\n                        </div>\n\n                        <!-- Exchange Rate Modal -->\n                        <div v-if=\"activeModal === 'rate'\" class=\"space-y-6\">\n                            <div class=\"bg-white p-6 rounded-3xl shadow-sm text-center\">\n                                <div class=\"text-xs font-bold text-[#deaa6e] tracking-[0.2em] mb-6\">EXCHANGE RATE</div>\n                                <div class=\"flex items-center gap-2 mb-4\">\n                                    <div class=\"flex-1\">\n                                        <div class=\"bg-[#f8e8c1]/40 p-4 rounded-2xl border-2 border-transparent focus-within:border-[#deaa6e] transition\">\n                                            <label class=\"block text-xs font-bold mb-1 opacity-50\">CNY (¥)</label>\n                                            <input type=\"number\" v-model=\"calcCny\" @input=\"updateKrw\" class=\"w-full bg-transparent text-center font-bold text-2xl outline-none text-[#594a40]\">\n                                        </div>\n                                    </div>\n                                    <i class=\"fa-solid fa-arrow-right-arrow-left text-[#deaa6e] text-lg\"></i>\n                                    <div class=\"flex-1\">\n                                        <div class=\"bg-[#f8e8c1]/40 p-4 rounded-2xl border-2 border-transparent focus-within:border-[#deaa6e] transition\">\n                                            <label class=\"block text-xs font-bold mb-1 opacity-50\">KRW (₩)</label>\n                                            <input type=\"number\" v-model=\"calcKrw\" @input=\"updateCny\" class=\"w-full bg-transparent text-center font-bold text-2xl outline-none text-[#594a40]\">\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"text-xs opacity-50 mb-6 bg-gray-100 inline-block px-3 py-1 rounded-full\">1 CNY ≈ {{ exchangeRate }} KRW</div>\n                                <button @click=\"fetchRate\" class=\"w-full py-4 rounded-xl bg-[#594a40] text-[#f8e8c1] font-bold text-sm shadow-lg active:scale-95 transition flex items-center justify-center gap-2\">\n                                    <i class=\"fa-solid fa-rotate\"></i> \n                                    {{ currentLang === 'zh' ? '更新即時匯率' : '환율 업데이트' }}\n                                </button>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </transition>\n        </div>\n    </transition>\n</div>\n\n<script>\n    const { createApp, ref, computed, onMounted, watch } = Vue;\n\n    createApp({\n        setup() {\n            const currentLang = ref('zh');\n            const selectedDate = ref('2025-12-30');\n            const scheduleDates = ['2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02', '2026-01-03', '2026-01-04'];\n            const activeModal = ref(null);\n            const weather = ref(null);\n            const itineraries = ref({});\n            const exchangeRate = ref(190.5);\n            const calcCny = ref(100);\n            const calcKrw = ref(19050);\n\n            // Flight Data\n            const flightData = {\n                '2025-12-30': {\n                    zh: [\n                        { code: 'CX960', depTime: '12:05', arrTime: '14:30', depAirport: 'HKG', depTerminal: 'T1', arrAirport: 'HGH', arrTerminal: 'T4' },\n                        { code: 'CZ3869', depTime: '12:10', arrTime: '14:10', depAirport: 'CAN', depTerminal: '', arrAirport: 'HGH', arrTerminal: '' }\n                    ],\n                    ko: [\n                        { code: 'OZ359', depTime: '--:--', arrTime: '13:45', depAirport: 'ICN', depTerminal: '', arrAirport: 'HGH', arrTerminal: '' }\n                    ]\n                },\n                '2026-01-04': {\n                    zh: [\n                        { code: 'CX961', depTime: '15:45', arrTime: '18:30', depAirport: 'HGH', depTerminal: '', arrAirport: 'HKG', arrTerminal: '' },\n                        { code: 'GJ8995', depTime: '19:05', arrTime: '21:15', depAirport: 'HGH', depTerminal: '', arrAirport: 'CAN', arrTerminal: '' }\n                    ],\n                    ko: [\n                        { code: 'OZ360', depTime: '15:05', arrTime: '18:10', depAirport: 'HGH', depTerminal: '', arrAirport: 'ICN', arrTerminal: '' }\n                    ]\n                }\n            };\n\n            // Default Itinerary Data (Hardcoded as requested)\n            const defaultItinerary = {\n                '2025-12-30': {\n                    zh: [\n                        { time: '16:00', content: '義烏雅悅酒店 Check-in', remark: '地址: 滙港路599-1號, 義烏' },\n                        { time: '18:30-21:00', content: '晚餐 義烏宴．小宴', remark: '' },\n                        { time: '21:00-23:00', content: '賓王夜市 (三挺路夜市)', remark: '提示: 晚間人非常的多，請注意不要走散，並且注意隨身貴重物品，以免丟失。' },\n                        { time: '23:00', content: '回酒店', remark: '' }\n                    ],\n                    ko: [\n                        { time: '16:00', content: '야웨호텔 (Yiwu Yandoo Yayue Hotel) 체크인', remark: '주소: No.599-1 Huigang Road, Yiwu' },\n                        { time: '18:30-21:00', content: '저녁 이우연회식당 (YIWUYAN.Xiaoyan)', remark: '' },\n                        { time: '21:00-23:00', content: '빈왕 야시장 (Binwang Night Market)', remark: '주의사항: 저녁에는 사람이 아주 많습니다. 길을 잃지 않도록 주의하시고, 소지품 분실을 피하기 위해 귀중품을 잘 챙겨주시기 바랍니다.' },\n                        { time: '23:00', content: '야웨호텔', remark: '' }\n                    ]\n                },\n                '2025-12-31': {\n                    zh: [\n                        { time: '7:00-9:00', content: '雅悅酒店早餐', remark: '' },\n                        { time: '9:50', content: '酒店大堂集合', remark: '' },\n                        { time: '10:00-11:30', content: '前往韓雄貿易有限公司', remark: '' },\n                        { time: '11:30-13:00', content: '午餐', remark: '義烏國際商貿城二區 韓國料理' },\n                        { time: '13:00-16:00', content: '參觀義烏國際商貿城(福田市場)', remark: '請參考義烏國際商貿城地圖' },\n                        { time: '16:00-16:15', content: '集合地點等候', remark: '' },\n                        { time: '17:00-21:00', content: '晚餐 佛堂．唐朝戲宴 (佛堂鎮)', remark: '' },\n                        { time: '21:00-22:20', content: '佛堂老街', remark: '跨年夜 有煙花晚會 時間於10點開始' },\n                        { time: '22:30', content: '回酒店', remark: '' }\n                    ],\n                    ko: [\n                        { time: '7:00-9:00', content: '호텔 조식', remark: '' },\n                        { time: '9:50', content: '호텔로비서 집합', remark: '' },\n                        { time: '10:00-11:30', content: '한웅 무역 회사', remark: '' },\n                        { time: '11:30-13:00', content: '점심', remark: '이우국제시장 2동 한국요리' },\n                        { time: '13:00-16:00', content: '이우국제시장 (푸톈 시장）구경', remark: '이우국제시장지도 참고' },\n                        { time: '16:00-16:15', content: '만나는 곳에서 집합', remark: '' },\n                        { time: '17:00-21:00', content: '저녁 포당.당차오 시엔 (중식)', remark: '' },\n                        { time: '21:00-22:20', content: '포당옛날거리 (Fotang Old street)', remark: '신년전야 밤에 불꽃놀이 행사 (10시부터 시작)' },\n                        { time: '22:30', content: '야웨호텔', remark: '' }\n                    ]\n                },\n                '2026-01-01': {\n                    zh: [\n                        { time: '7:00-9:00', content: '雅悅酒店早餐', remark: '' },\n                        { time: '9:20', content: '酒店大堂集合', remark: '' },\n                        { time: '9:30-12:30', content: '前往橫店影視城', remark: '' },\n                        { time: '12:30-13:30', content: '午餐 臨江閣．江景餐廳', remark: '' },\n                        { time: '13:45-16:00', content: '參觀東陽中國木雕城', remark: '' },\n                        { time: '16:00-19:00', content: '阿里亞娜中東餐廳', remark: '' },\n                        { time: '19:10-21:00', content: '華潤義烏天地商業街區間(自由活動)', remark: '' },\n                        { time: '21:00', content: '回酒店', remark: '' }\n                    ],\n                    ko: [\n                        { time: '7:00-9:00', content: '호텔 조식', remark: '' },\n                        { time: '9:20', content: '호텔로비서 집합', remark: '' },\n                        { time: '9:30-12:30', content: '흠덴 영화촬영소(헝디엔 월드 스튜디오 /Hengdian World Studios) 로 출발', remark: '' },\n                        { time: '12:30-13:30', content: '점심 린장제．강변식당 (Linjiangge. River view restaurant)', remark: '' },\n                        { time: '13:45-16:00', content: '동양 나무조각박물관', remark: '' },\n                        { time: '16:00-19:00', content: '아리아나중동식당 (ARIANA Restaurant)', remark: '' },\n                        { time: '19:10-21:00', content: '이우티엔디 (Yiwu Place) (자유시간)', remark: '' },\n                        { time: '21:00', content: '야웨호텔', remark: '' }\n                    ]\n                },\n                '2026-01-02': {\n                    zh: [\n                         { time: '7:00-9:00', content: '雅悅酒店早餐', remark: '' },\n                         { time: '11:30', content: '酒店大堂集合/退房', remark: '退房時間為11點' },\n                         { time: '12:00-14:30', content: '前往杭州', remark: '車程約2小時, 於中途站休息 / 午餐' },\n                         { time: '15:00', content: '杭州西湖武林Pagoda君亭設計酒店 Check-in', remark: '地址：中國,杭州,體育場路261號' },\n                         { time: '15:00-17:00', content: '自由活動', remark: '' },\n                         { time: '17:30', content: '酒店大堂集合', remark: '' },\n                         { time: '18:00-20:30', content: '晚餐 入江南．金獎杭幫菜．浙江菜', remark: '地址: 浙江省杭州市西湖区虎跑路四眼井228号' },\n                         { time: '21:00', content: '武林夜市', remark: '自由活動' }\n                    ],\n                    ko: [\n                        { time: '7:00-9:00', content: '호텔 조식', remark: '' },\n                        { time: '11:30', content: '호텔로비서 집합/체크아웃', remark: '체크아웃 시간: 11시' },\n                        { time: '12:00-14:30', content: '항주로 출발', remark: '약 2시간 걸림, 휴게소에서 점심' },\n                        { time: '15:00', content: '서호 우린 파고다 호텔 체크인', remark: '地址：中國,杭州,體育場路261號' },\n                        { time: '15:00-17:00', content: '자유시간', remark: '' },\n                        { time: '17:30', content: '호텔로비서 집합', remark: '' },\n                        { time: '18:00-20:30', content: '저녁 루장난 절강성요리', remark: '주소: 浙江省杭州市西湖区虎跑路四眼井228号' },\n                        { time: '21:00', content: '우린야시장 (Wulin Night Market)', remark: '자유시간' }\n                    ]\n                },\n                '2026-01-03': {\n                    zh: [\n                        { time: '6:30-10:00', content: '酒店早餐', remark: '' },\n                        { time: '10:00-11:00', content: '大韓民國臨時政府杭州舊址紀念館', remark: '地址: 中國浙江省杭州市上城区湖滨长生路55号' },\n                        { time: '11:00-12:30', content: '遊覽西湖 (自由活動)', remark: '曲院風荷 (西湖十景之一) / 岳王廟' },\n                        { time: '12:40-14:00', content: '午餐 寄暢興·江南蟹黃麵·非遺杭幫菜(西湖湖景店)', remark: '地址：南山路147号西湖天地' },\n                        { time: '14:10-16:30', content: '遊覽西湖 (自由活動)', remark: '柳浪聞鶯 / 錢王祠 / 湖濱路步行街' },\n                        { time: '18:30-20:30', content: '晚餐 茶人村·西湖醋魚', remark: '地址: 浙江省杭州市西湖区龍井路99號' },\n                        { time: '20:30', content: '清河坊歷史文化特色街區 (自由活動)', remark: '' },\n                        { time: '21:00', content: '回酒店', remark: '' }\n                    ],\n                    ko: [\n                        { time: '6:30-10:00', content: '호텔 조식', remark: '' },\n                        { time: '10:00-11:00', content: '대한민국 임시정부 항저우 구지 기념관', remark: '주소: 中國浙江省杭州市上城区湖滨长生路55号' },\n                        { time: '11:00-12:30', content: '서호 구경 (자유시간)', remark: '서호십경 : 곡원풍하 (曲院風荷) / 악비묘' },\n                        { time: '12:40-14:00', content: '점심 지챵싱 계살국수 (Jì Chàng Xīng 서호호수점)', remark: '주소：南山路147号西湖天地' },\n                        { time: '14:10-16:30', content: '서호 구경 (자유시간)', remark: '서호십경 유랑문앵 (柳浪聞鶯) / 전왕사 / 후빈로 번화가' },\n                        { time: '18:30-20:30', content: '저녁 다인촌 (Charencun Tea House)', remark: '주소 : 浙江省杭州市西湖区龍井路99號' },\n                        { time: '20:30', content: '칭허팡역사문화거리 (자유시간)', remark: '' },\n                        { time: '21:00', content: '파고다호텔', remark: '' }\n                    ]\n                },\n                '2026-01-04': {\n                    zh: [\n                        { time: '6:30-10:00', content: '酒店早餐', remark: '' },\n                        { time: '11:00', content: '酒店大堂集合/退房', remark: '退房時間為11點' },\n                        { time: '11:30', content: '前往蕭山國際機場', remark: '第四航廈' }\n                    ],\n                    ko: [\n                        { time: '6:30-10:00', content: '호텔조식', remark: '' },\n                        { time: '11:00', content: '호텔로비서 집합/체크아웃', remark: '체크아웃 시간: 11시' },\n                        { time: '11:30', content: '항저우공항으로 출발', remark: '제4여객터미널' }\n                    ]\n                }\n            };\n\n            // Hotels\n            const hotels = {\n                zh: [\n                    { city: '義烏', name: '義烏雅悅酒店', address: '滙港路599-1號, 義烏', url: 'https://surl.amap.com/6XmTj5T12fs0' },\n                    { city: '杭州', name: '杭州西湖武林Pagoda君亭設計酒店', address: '體育場路261號, 杭州', url: 'https://surl.amap.com/n94yQv1sdob' }\n                ],\n                ko: [\n                    { city: 'Yiwu', name: 'Yiwu Yandoo Yayue Hotel', address: 'No.599-1 Huigang Road, 322000 Yiwu', url: 'https://surl.amap.com/6XmTj5T12fs0' },\n                    { city: 'Hangzhou', name: 'Pagoda Hotel Hangzhou', address: 'No.261 Tiyuchang Road, Hangzhou', url: 'https://surl.amap.com/n94yQv1sdob' }\n                ]\n            };\n\n            // To-Do Lists\n            const todoData = {\n                zh: [\n                    { text: '香港身分證/回鄉證/護照', checked: false },\n                    { text: '轉插 (Adapter)', checked: false },\n                    { text: '手機充電', checked: false },\n                    { text: '上網卡或漫遊電話', checked: false },\n                    { text: '衛生用品', checked: false },\n                    { text: '保暖衣物', checked: false },\n                    { text: '救急藥物(傷風感冒,胃藥等)', checked: false }\n                ],\n                ko: [\n                    { text: '여권', checked: false },\n                    { text: '아뎁터', checked: false },\n                    { text: '해외 결제 가능한 신용카드 혹근 알리페이 / 위쳇페이', checked: false },\n                    { text: '유심 / 포켓와이파이', checked: false },\n                    { text: '충전기', checked: false },\n                    { text: '개인 위생용품', checked: false },\n                    { text: '비상약', checked: false },\n                    { text: '따뜻한 옷', checked: false }\n                ]\n            };\n\n            const todoList = ref({ zh: [], ko: [] });\n\n            // Text Resources\n            const texts = {\n                zh: { title: '義烏杭州之旅', schedule: '行程', noSchedule: '點擊 + 新增行程', flightInfo: '航班資訊', navMap: '高德導航 (AMAP)', menu: { hotel: '酒店', prep: '行前準備', info: '資訊', rate: '匯率' } },\n                ko: { title: '이우항주여행', schedule: '일정', noSchedule: '+ 버튼을 눌러 일정 추가', flightInfo: '항공편 정보', navMap: '지도 보기 (AMAP)', menu: { hotel: '호텔', prep: '준비사항', info: '자료', rate: '환율' } }\n            };\n\n            // Computed Properties\n            const t = (k) => { const keys = k.split('.'); let val = texts[currentLang.value]; keys.forEach(sub => val = val[sub]); return val; };\n            \n            const currentLocationName = computed(() => {\n                const yiwu = ['2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02'];\n                if(currentLang.value === 'zh') return yiwu.includes(selectedDate.value) ? '義烏' : '杭州';\n                return yiwu.includes(selectedDate.value) ? '이우 (Yiwu)' : '항주 (Hangzhou)';\n            });\n            \n            const currentFlights = computed(() => {\n                const d = flightData[selectedDate.value];\n                if (!d) return [];\n                return d[currentLang.value] || [];\n            });\n            \n            const isFlightDate = computed(() => !!currentFlights.value.length);\n            \n            const currentItinerary = computed(() => {\n                const lang = currentLang.value;\n                const date = selectedDate.value;\n                if (itineraries.value[date] && itineraries.value[date][lang]) {\n                    return itineraries.value[date][lang];\n                }\n                return [];\n            });\n\n            // Methods\n            const formatDate = (ds) => { const d = new Date(ds); return `${d.getMonth()+1}/${d.getDate()}`; };\n            const formatDateFull = (ds) => { const d = new Date(ds); return `${d.getFullYear()}.${d.getMonth()+1}.${d.getDate()}`; };\n            const toggleLang = () => currentLang.value = currentLang.value === 'zh' ? 'ko' : 'zh';\n            \n            // CRUD\n            const addItem = () => {\n                const time = prompt(\"Time (e.g. 10:00)\", \"\"); if(!time) return;\n                const content = prompt(\"Content\", \"\"); if(!content) return;\n                const remark = prompt(\"Remark (Optional)\", \"\");\n                const lang = currentLang.value;\n                const date = selectedDate.value;\n                \n                if (!itineraries.value[date]) itineraries.value[date] = { zh: [], ko: [] };\n                if (!itineraries.value[date][lang]) itineraries.value[date][lang] = [];\n                \n                itineraries.value[date][lang].push({ id: Date.now(), time, content, remark, isEditing: false });\n                saveToLocal();\n            };\n\n            const deleteItem = (idx) => { \n                if(confirm('Delete?')) { \n                    itineraries.value[selectedDate.value][currentLang.value].splice(idx, 1); \n                    saveToLocal(); \n                }\n            };\n\n            const editItem = (idx) => { \n                const item = itineraries.value[selectedDate.value][currentLang.value][idx]; \n                item.editTime = item.time; \n                item.editContent = item.content;\n                item.editRemark = item.remark;\n                item.isEditing = true; \n            };\n\n            const saveItem = (idx) => { \n                const item = itineraries.value[selectedDate.value][currentLang.value][idx]; \n                item.time = item.editTime; \n                item.content = item.editContent;\n                item.remark = item.editRemark;\n                item.isEditing = false; \n                saveToLocal(); \n            };\n\n            const cancelEdit = (idx) => itineraries.value[selectedDate.value][currentLang.value][idx].isEditing = false;\n            \n            const saveToLocal = () => { \n                localStorage.setItem('trip_itinerary_2026_v4', JSON.stringify(itineraries.value)); \n                localStorage.setItem('trip_todos_2026_v4', JSON.stringify(todoList.value)); \n            };\n\n            // Modal & Tools\n            const openModal = (m) => { activeModal.value = m; if(m==='rate') fetchRate(); };\n            const closeModal = () => activeModal.value = null;\n            const toggleTodo = (item) => { item.checked = !item.checked; saveToLocal(); };\n            \n            const updateKrw = () => calcKrw.value = (calcCny.value * exchangeRate.value).toFixed(0);\n            const updateCny = () => calcCny.value = (calcKrw.value / exchangeRate.value).toFixed(2);\n            \n            const fetchRate = async () => {\n                try {\n                    const r = await fetch('https://api.exchangerate-api.com/v4/latest/CNY');\n                    const d = await r.json();\n                    if(d.rates.KRW) { exchangeRate.value = d.rates.KRW; updateKrw(); }\n                } catch(e) {}\n            };\n\n            const fetchWeather = async () => {\n                const yiwu = ['2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02'];\n                const isYiwu = yiwu.includes(selectedDate.value);\n                const lat = isYiwu ? 29.31 : 30.27;\n                const lon = isYiwu ? 120.07 : 120.15;\n                try {\n                    const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);\n                    const d = await r.json();\n                    weather.value = d.current_weather;\n                } catch(e) {}\n            };\n\n            // Init\n            onMounted(() => {\n                // Initialize Itinerary\n                const savedItinerary = localStorage.getItem('trip_itinerary_2026_v4');\n                if(savedItinerary) {\n                    itineraries.value = JSON.parse(savedItinerary);\n                } else {\n                    // Load Default Data if local storage empty\n                    itineraries.value = defaultItinerary;\n                }\n\n                // Initialize Todos\n                const savedTodos = localStorage.getItem('trip_todos_2026_v4');\n                if(savedTodos) {\n                    todoList.value = JSON.parse(savedTodos);\n                } else {\n                    todoList.value = todoData;\n                }\n\n                fetchWeather();\n                fetchRate();\n            });\n\n            watch(selectedDate, fetchWeather);\n\n            return { \n                currentLang, selectedDate, scheduleDates, activeModal, weather, \n                currentFlights, isFlightDate, currentItinerary, hotels, todoList, \n                calcCny, calcKrw, exchangeRate, currentLocationName, \n                t, formatDate, formatDateFull, toggleLang, addItem, deleteItem, editItem, saveItem, cancelEdit, \n                openModal, closeModal, toggleTodo, updateKrw, updateCny, fetchRate \n            };\n        }\n    }).mount('#app');\n</script>\n</body>\n</html>"
}